name: Build Qv2ray AUR
on: 
  push:
    paths-ignore:
      - '.github'
    branches:
      - master
      - dev
    tags:
      - 'v**'
  schedule:
    - cron: "0 19 * * *"

jobs:
  aur:
    strategy:
      fail-fast: false
      matrix:
        repo: [qv2ray, qv2ray-dev-git]
    runs-on: [ubuntu-latest]
    steps:
      - uses: DuckSoft/build-aur-action@v1.0
        with:
          repo-name: ${{ matrix.repo }}

      - name: Post AUR Build Action
        uses: DuckSoft/post-aur-build-action@0.0.9
        id: post

      - uses: actions/upload-artifact@master
        with:
          name: ${{ steps.post.outputs.pkgfile }}
          path: ${{ steps.post.outputs.pkgpath }}
  
