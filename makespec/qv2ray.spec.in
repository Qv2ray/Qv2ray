Name:           @NAME@
Version:        @VERSION@
Release:        @RELEASE@
Summary:        A Qt frontend for V2Ray, written in c++.

License:        GPLv3
URL:            https://github.com/Qv2ray/Qv2ray
Source0:        @SOURCE0@

BuildRequires:  cmake
BuildRequires:  gcc-c++
BuildRequires:  qt5-qtbase-devel
BuildRequires:  qt5-qttools-devel
BuildRequires:  protobuf-compiler
BuildRequires:  protobuf-devel
BuildRequires:  grpc-devel
BuildRequires:  grpc-plugins
BuildRequires:  libcurl-devel
BuildRequires:  qt5-qtsvg-devel
BuildRequires:  elfutils-devel
BuildRequires:  binutils-devel
BuildRequires:  libdwarf-devel

%description
A Qt based cross-platform GUI fontend for V2Ray.

%prep
%setup -q -n @NAME_VERSION@


%build
%cmake
%cmake_build


%install
rm -rf "$RPM_BUILD_ROOT"
%cmake_install
%find_lang %{name} --with-qt --all-name


%files -f %{name}.lang
%license LICENSE
%doc README.md
%dir %{_datadir}/qv2ray/plugins/
%{_bindir}/qv2ray
%{_datadir}/icons/*
%{_datadir}/applications/*
%{_datadir}/metainfo/*


%package -n QvPlugin-BuiltinProtocolSupport
Summary:        A Qt frontend for V2Ray, written in c++
Requires:       qv2ray
%description -n QvPlugin-BuiltinProtocolSupport
Enable built-in VMess, VLESS, SOCKS, HTTP, Shadowsocks, Dokodemo-door support.
%files -n QvPlugin-BuiltinProtocolSupport
%{_datadir}/qv2ray/plugins/libQvPlugin-BuiltinProtocolSupport.so


%changelog
